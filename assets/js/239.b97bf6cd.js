(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{303:function(s,a,e){"use strict";e.r(a);var n=e(0),t=Object(n.a)({},function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h4",{attrs:{id:"尝试使用webpack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#尝试使用webpack","aria-hidden":"true"}},[s._v("#")]),s._v(" 尝试使用webpack")]),s._v(" "),e("h5",{attrs:{id:"清除webpack-build时候的dist文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#清除webpack-build时候的dist文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 清除webpack build时候的dist文件")]),s._v(" "),e("p",[e("code",[s._v("clean-webpack-plugin")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("plugins: [\n    new CleanWebpackPlugin(['dist'],{\n        root: path.resolve(__dirname, '../'),\n        verbose: true //是否始终打印日志在控制台，默认false\n    }),\n]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("blockquote",[e("p",[s._v("注意：当webpack的配置文件不在根目录下的时候，一定要配置root，否者会出现错误")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    clean-webpack-plugin: D:\\workspace\\build-tools\\webpack\\dist is outside of the project root. Skipping...\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h5",{attrs:{id:"代码压缩插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#代码压缩插件","aria-hidden":"true"}},[s._v("#")]),s._v(" 代码压缩插件")]),s._v(" "),e("p",[e("code",[s._v("uglifyjs-webpack-plugin")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('uglifyOptions: {\n    ie8: true,\n    compress: {\n        warnings: true,  //删除无法访问的代码或未使用的声明等时显示警告\n        drop_console: true, // 删除 console.* 函数\n        unsafe_proto: true  //false- 优化表达式，如 Array.prototype.slice.call(a)into[].slice.call(a)\n    }, \n    output: {\n        beautify: false, //不要美化代码\n        comments: false  //（默认false） - 传递true或"all"保留所有注释，"some"保留一些注释，正则表达式字符串（例如/^!/）或函数。\n    }\n},\nextractComments: false  //注释不要单独打包成一个文件\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h5",{attrs:{id:"分离css"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#分离css","aria-hidden":"true"}},[s._v("#")]),s._v(" 分离css")]),s._v(" "),e("p",[e("code",[s._v("extract-text-webpack-plugin")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('const ExtractTextPlugin = require("extract-text-webpack-plugin")\n\n...\ntest: /\\.css$/,\nuse: ExtractTextPlugin.extract({\n    fallback: "style-loader",\n    use: "css-loader"\n})\n...\nplugins: [\n    new ExtractTextPlugin("styles.css"),\n]\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("这样编译会报错")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("(node:11360) DeprecationWarning: Tapable.plugin is deprecated. Use new API on `.hooks` instead\n(node:11360) UnhandledPromiseRejectionWarning: Error: Chunk.entrypoints: Use Chunks.groupsIterable and filter by instanceof Entrypoint instead\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("错误出现原因：\nextract-text-webpack-plugin还不能支持webpack4.0.0以上的版本。\nnpm install --save-dev extract-text-webpack-plugin@next")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('package.json\n\n"extract-text-webpack-plugin": "^4.0.0-beta.0",\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("blockquote",[e("p",[s._v("编译的时候， 设置devtool: 'null', 可以减小体积")])]),s._v(" "),e("p",[s._v("在过去，如何将 CSS 提取到一个文件中这是 extract-text-webpack-plugin 的工作。不幸的是这个插件与 webpack 4 不太兼容。根据 Michael Ciniawsky 的说法：extract-text-webpack-plugin 的维护已经成为了一个很大的负担，这已经不是第一次因为它的问题，而使升级 webpack 主版本变的而复杂和繁琐。\n而在webpack 4+版本我们可以使用mini-css-extract-plugin 插件来解决这些问题。")]),s._v(" "),e("h5",{attrs:{id:"抽取js的公共代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#抽取js的公共代码","aria-hidden":"true"}},[s._v("#")]),s._v(" 抽取js的公共代码")]),s._v(" "),e("p",[s._v("webpack4 optimization.splitChunks(内部插件) 取代了CommonsChunkPlugin 插件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("optimization: {\n    splitChunks: {\n        chunks: 'all',\n        minChunks: 1,\n        name: true,\n        cacheGroups: {\n            vendors: {\n                minChunks: 1,//一般为非第三方公共模块\n                chunks:'initial', // \n                name:'vendors', // 入口的entry的key\n                enforce:true   // 强制\n            }\n        }\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("blockquote",[e("p",[s._v("webpack4 当模式为"),e("code",[s._v("production")]),s._v("时，会自动压缩js代码，但是可以通过"),e("code",[s._v("uglifyjs-webpack-plugin")]),s._v("进一步控制")])])])},[],!1,null,null,null);a.default=t.exports}}]);