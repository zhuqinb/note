(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{462:function(t,e,r){"use strict";r.r(e);var a=r(0),o=Object(a.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"关于http的请求问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#关于http的请求问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 关于http的请求问题")]),t._v(" "),r("h2",{attrs:{id:"设计一个策略和方法，实现在https的前端项目里进行http请求"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#设计一个策略和方法，实现在https的前端项目里进行http请求","aria-hidden":"true"}},[t._v("#")]),t._v(" 设计一个策略和方法，实现在https的前端项目里进行http请求")]),t._v(" "),r("blockquote",[r("p",[t._v("如果HTTPS页面包括由普通明文HTTP连接加密的内容,那么连接只是被部分加密：非加密的内容可以被嗅探者入侵，并且可以被中间人攻击者修改，因此连接不在受到保护。当一个网页出现这种情况时，它被称为混合内容页面。")])]),t._v(" "),r("p",[r("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Security/MixedContent",target:"_blank",rel:"noopener noreferrer"}},[t._v("混合内容 - 安全 | MDN"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("其中提到，"),r("code",[t._v("<audio>")]),t._v(" "),r("code",[t._v("<img>")]),t._v(" "),r("code",[t._v("<video>")]),t._v(" "),r("code",[t._v("<object>")]),t._v("的http请求被任务是被动，不能改变网页的其它部分。")]),t._v(" "),r("p",[t._v("然而"),r("code",[t._v("<script>")]),t._v(" "),r("code",[t._v("<link>")]),t._v(" "),r("code",[t._v("XMLHttpRequest")]),t._v(" "),r("code",[t._v("<iframe>")]),t._v(" css中的url方法"),r("code",[t._v("<object>")]),t._v("的data属性 属于被动内容,可以改变原页面的内容，窃取敏感数据,容易受到攻击")]),t._v(" "),r("p",[t._v("对应的，在 "),r("a",{attrs:{href:"https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("什么是混合内容？ | Web | Google Developers"),r("OutboundLink")],1),t._v("一文中已经做了相关实验，测试了主动和被动的混合内容")]),t._v(" "),r("ul",[r("li",[r("code",[t._v("<script>")]),t._v(" 均默认阻止")]),t._v(" "),r("li",[r("code",[t._v("XMLHttpRequest")]),t._v(" 阻止")]),t._v(" "),r("li",[r("code",[t._v("<a>")]),t._v(" 不会产生混合内容")]),t._v(" "),r("li",[r("code",[t._v("<img>")]),t._v(" 仍会加载混合内容图像，但也会向用户显示警告")])]),t._v(" "),r("p",[t._v("被动混合内容全是警告\n"),r("img",{attrs:{src:t.$withBase("/images/JavaScript/question/http-01.png"),alt:"foo"}})]),t._v(" "),r("p",[t._v("主动混合内容就阻止了\n"),r("img",{attrs:{src:t.$withBase("/images/JavaScript/question/http-02.png"),alt:"foo"}})]),t._v(" "),r("h3",{attrs:{id:"所以iframe、script、xhr都是不行的"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#所以iframe、script、xhr都是不行的","aria-hidden":"true"}},[t._v("#")]),t._v(" 所以iframe、script、xhr都是不行的")]),t._v(" "),r("p",[t._v("但是使用 img 作为被动混合内容可以发送请求，\n请求 img 返回 204 就是 onerror，\n返回 1x1 的图片就是 onload，\n这就是一个 boolean，多发几个带上序列，就可以从服务器获取到返回值了")])])},[],!1,null,null,null);e.default=o.exports}}]);