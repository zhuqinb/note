# Scss 基本语法

完全兼容 css3 在 css 基础上增加变量、嵌套、混合等功能；通过函数进行颜色值与属性值的运算；提供控制指令等高级功能；自定义输出格式

## 语法格式

存在两种格式 scss 和 sass

scss-本文示例所使用的格式--这种格式仅在 css3 语法的基础上进行拓展，所有 css3 语法在 scss 中都是通用的，同时加入 sass 的特色功能。此外，scss 也支持大多数 css hacks 写法以及浏览器前缀写法，以及早起的 ie 滤镜写法。这种格式以.scss 作为拓展名

sass，比较早的语法格式，被称为缩进格式通常简写"sass",是一种简化格式，它使用"缩进"代替"花括号"表示属性属于某个选择器，用"换行"代替"分号"分割属性，很多人认为这样做比 scss 更容易阅读，书写也更快速。缩进格式也可以使用 sass 的全部功能，只是与 scss 相比个别地方采用了不同的表达方式，以.sass 作为拓展名

## css 功能拓展

选择器嵌套、其中&表示父类
属性嵌套

```scss
#main {
	a {
		&:hover {
			font: {
				size: 14px;
				family: 'Microsoft Yahei';
			}
		}
	}
	&-sidebar {
	}
}

/* 编译后 */
#main a {
}
#main a:hover {
	font-size: 14px;
	font-family: 'Microsoft Yahei';
}
#main-sidebar {
}
```

## 注释

多行 `/* */`, 编译后保留， 里面可以插入变量
单行 `//`, 编译后删除

```scss
$version: '1.2.3';
/* This CSS is generated by My Snazzy Framework version #{$version}. */

// 编译后
/* This CSS is generated by My Snazzy Framework version 1.2.3. */
```

## Sass Script

### 变量 `$`

直接定义只在块级作用域下有效，后面加 !global 为全局变量

```scss
$width: 100px;
$width: 100px !global;
```

### 数据类型 6 种

-   _数字_ 1，2，14，10px
-   _字符串_ 有引号字符串与无引号字符串，"foo", 'bar', baz
-   _颜色_ blue, #04a3f9, rgba(255,0,0,0.5)
-   _布尔_ true false
-   _空值_ null
-   _数组_ list 用空格或逗号分隔符
-   _maps_ 相当于 js 的 object

SassScript 也支持其他 CSS 属性值，比如 Unicode 字符集，或 !important 声明。然而 Sass 不会特殊对待这些属性值，一律视为无引号字符串。

#### 字符串(Strings)

分为有引号和无引号，并且编译后不影响类型，只有当使用`#{}`,会将有引号编译无引号

#### 数组(Lists)

包含空格或用逗号分隔两种形式 多层数组用分隔

操作： nth() 访问某一项 join() 连接 append() 在后面追加新值 @each 遍历数组每一项

#### Maps

必须使用圆括号包围;map 在使用 list 方法，会自动转换成 list `key1 value1, key2 value2`， 反之则不能

操作：map-get()取值 map-merge()将 map 与新加的键值对合并, @each 遍历键值对 map 可用在 list 能用的任何地方

#### 颜色 colors

### 运算

所有数据类型均支持相等运算 == 或 !=，此外，每种数据类型也有其各自支持的运算方式。

#### 数学运算

SassScript 支持数字的加减乘除、取整等运算 (`+`, `-`, `*`, `/`, `%`)，如果必要会在不同单位间转换值。

关系运算 `<`, `>`, `<=`, `>=` 也可用于数字运算

##### 除法运算

`/`在 css 中起到分隔数字的用途，SassScript 起到除法运算
以下三种情况 `/` 将被视为除法运算符号：

-   如果值，或值的一部分，是变量或者函数的返回值
-   如果值被圆括号包裹
-   如果值是算数表达式的一部分

如果需要使用变量又要使用 `css` 分隔运算，使用`#{}`

#### 颜色运算

运算颜色采用分段增加；如有存在透明值，只有透明度一样时才可以进行运算

可以使用`opacify` 或 `transparentize` 对透明值进行调整

#### 字符串运算

使用 `+` 作为连接运算符的时候，有无引号根据 `+` 左边字符串确定；如果在有引号的文本中使用`#{}`插入动态的值

```scss
body:before {
	content: 'foo ' + bar; // content: 'foo bar'
}
body:before {
	content: foo + ' bar'; // content: foo bar
}
p {
	margin: 3px + 4px auto; // margin: 7px auto
}
p:before {
	content: 'i ate #{5 + 10} pies!'; // content: "I ate 15 pies!"
}
```

#### 布尔运算

支持 `and` `or` 以及 `not` 运算

#### 数组运算

不支持任何运算，只能使用 `list functions` 控制

### 圆括号

影响运算顺序

### 函数

```scss
p {
	color: hsl(0, 100%, 50%);
}
// color: #ff0000
```

### 关键词参数

上面例子也可以写成

```scss
p {
	color: hsl($hue: 0, $saturation: 100%, $lightness: 50%);
}
```

好处： 顺序可以打乱

### 插值语句`#{}`

可以在选择器或属性名中使用变量;有些情况下可以避免 sass 运算表达式，直接编译 sass

```scss
$name: foo;
$attr: border;
$fort-size: 12px;
$line-height: 30px;
p.#{$name} {
	#{#attr}-color: blue;
	font: #{$font-size}/#{$line-height};
}
// 编译后
p.foo {
	border-color: blue;
	font: 12px/30px;
}
```

### !default

如果一个变量没有进行赋值，使用这个会赋新的值，如果已经赋值，则不会赋值

## @-Rules 与指令

### `@import`

Sass 拓展了@import 功能，允许导入 SCSS 或 Sass 文件

下面这几种情况仅作为普通的 css 语句

1. 文件拓展名是 .css；
1. 文件名以 http:// 开头；
1. 文件名是 url()；
1. @import 包含 media queries。

### 分音

如果需要导入 SCSS 或者 Sass 文件，又不希望将其编译为 CSS，只需要在文件名前添加下划线，但是导入语句却不需要添加下划线

file: `_colors.scss`

```scss
@import 'colors';
```

### 嵌套@import

可以选择器块中导入`scss`,但是不能在混合指令或控制指令中嵌套@import

```scss
#main {
	@import 'colors';
}
```

### @media

和 `css` 中用法一样，只是增加一些功能

可以放在 `css` 规则内,编译后会自动放到`css`规则外面

`@media` 可以相互嵌套，会自动添加 and

可以使用 SassScript(比如变量,函数,以及运算符) 替换条件的名称和值

### @extend

一个样式可以继承与其他的样式,继承后包括父样式的特殊样式

可以多重继承

可以链式继承 父亲继承爹的, 儿子继承父亲的

```scss
.error {
	color: red;
}
.tip {
	font-size: 14px;
}
.errorTip {
	@extend .error, .tip;
	//或者
	@extend .error;
	@extend .tip;
}
```

### @entend-Only 选择器

当定义一套样式不是给某个元素使用时,只是通过@extend 只能使用;定义时并知道 class 或者 id 规则的时候,可以使用`占位符选择器`,用`%`替换原有的`.`,`#`

```scss
#content a%extreme {
	color: red;
	font-size: 14px;
}
.notice {
	@extend @extreme;
}

// 编译为
#content a.notice {
	color: red;
	font-size: 14px;
}
```

### `!optional`

不产生新的选择器,只继承属性

```scss
a.important {
	@extend .notice !optional;
}
```

### 继承需要注意

不要在`@media` 中继承`@media` 外层的规则

```scss
// 可行
@media print {
	.error {
	}
	.seriousError {
		@extend .error;
	}
}
// 不可行
.error {
}
@media print {
	.seriousError {
		@extend .error;
	}
}
```

### @at-root([options])

如果没有参数:使用这个后,规则嵌套不会加上父规则

如果有参数: 根据参数判断排除那一层

```scss
.parent {
	@at-root .child {
	}
}
// 编译
.parent {
}
.child {
}

// 加参数
@media print {
	.page {
		@at-root (without: media) {
		}
	}
}

// 编译
@media print {
	.page {
	}
}
.page {
	color: red;
}
```

### 调试指令

`@debug` `@warn`

## 控制指令

### @if

```scss
@if 1+1 == 2 {
	color: red;
} @else if 1+1 == 3 {
	color: blue;
} @else {
	color: yellow;
}
```

### @for

```scss
@for $i from 1 through 3 {
}
```

`to` 和 `through`区别 前者 包括开始不包括结束, 后者开始也包括结束

### @each

遍历 list 或者 map

```scss
// 遍历单层
$animals: puma, sea-slug, egret salamander;
@each $animal in animals {
	.#{$animal}-icon {
		background-image: url('/image/#{$animal}.png');
	}
}
// 遍历多层
$animalInfo: (puma, black, default), (sea-slug, blue, pointer), (egret, white, move);

@each $animal, $color, $cursor in $animalInfo {
	.#{$animal}-icon {
		background-image: url('/images/#{animal}.png');
		border: 2px solid $color;
		cursur: $cursor;
	}
}
```

### @while

```scss
$i: 6;
@while $i > 0 {
	.item-#{$i} {
		width: 2em * $i;
	}
	$i: $i - 2;
}
```

## 混合指令

简写模式: `@mixin` 可以用 `=` 表示, `@include` 可以用`+`表示

```scss
// 一些代码的集合
@mixin block1 {
	color: red;
}

@include block1;

// 可以有参数也可以没有
@mixin block2($color) {
	color: $color;
}
@include block2(blue);
// 关键词参数
@include block2($color: blue);

// 参数支持可变参数
@mixin block3($border...) {
	border: $border;
}
@include block3(1px solid red);

@mixin block4($border...) {
	@include border($border...);
}

@mixin border($border...) {
	border: $border;
}
@include block4(1px solid red);

// 支持导入内容
@mixin block5 {
	html {
		@content;
	}
}
@include block5 {
	body {
		color: #666;
	}
}
// 编译为
html body {
	color: #666;
}

// 支持简写 上面block5可以简写为

/**
=block5
 html
  @content

+block5
 body
  color: #666;
*/
```

## 函数指令

与 mixin 类似支持若干个参数,但是需要@return 返回结果

支持关键词参数

```scss
$grid-width: 40px;
$gutter-width: 10px;
@function grid-width($n) {
	@return $n * $grid-width + $($n - 1) * $gutter-width;
}

#sidebar {
	width: grid-width(5);
}

// 编译为
#sidebar {
	width: 240px;
}
```

## 输出格式

Sass 提供了四种输出格式，可以通过 :style option 选项设定，或者在命令行中使用 --style 选项。

-   :nested 默认;可以清晰反映 css 与 html 的解构关系
-   :expanded 更像是手写的,根据选择器缩进
-   :compact 每条 css 规则只占一行
-   :compressed 删除所有无意义空格,空白行,注释;体积压缩最小

<ClientOnly>
<article-info weather="qing" mood="shuai">2019 年 8 月 13 日 10:48-2019 年 8 月 13 日 17:20</article-info>
</ClientOnly>
