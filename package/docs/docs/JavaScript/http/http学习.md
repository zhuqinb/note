# http 学习

看完能掌握的知识点

-   什么是三次握手

-   HTTPS 链接的创建过程，以及为什么 HTTPS 就是安全的

-   什么是长链接，为什么需要长链接

-   HTTP2 的信通复用又为什么能提高性能

## http 过程

浏览器输入 URLh 后 HTTP 请求返回的完整过程

<img :src="$withBase('/images/JavaScript/http/http-02.jpg')" alt="foo">

浏览器首先会进行 Redirect， 因为浏览器可能会永久记入这个地址之前跳转的状态

然后去读缓存

然后将进行 DNS 查找，将域名转换成 ip 地址

然后进行 TCP 三次握手，如果是 https，这里需要进行保存数据安全的过程

发送数据包

接受响应

## http 进化史

### HTTP/0.9

-   只有一个命令 GET

-   没有 HEADER 等描述数据的信息

-   服务器发送完毕，就关闭 TCP 连接

### HTTP/1.0

-   增加了很多命令 如 HEAD、POST

-   增加了 status code 和 header

-   多字符串支持、多部分发送、权限、缓存等

### HTTP/1.1

-   持久连接：一个 http 请求就要在客户端和服务器之间创建一个 tcp 连接，在服务端返回连接后 tcp 被关闭，这样比较耗费性能，延迟也比较高；增加这个功能后要给一个 tcp 可以发送多个请求

-   pipeline： 多个 http 发送后，客户端返回的数据需要按照请求的顺序返回数据（串行）

-   增加 host 和其他命令： 一个主机可以部署多个服务，用 host 字段进行区分

### HTTP/2.0

-   所有数据以二进制传输：之前版本的 http 请求通过字符串传输

-   同一个连接里面发送多个请求不再需要按照顺序来：好处可以并行请求，提高性能

-   头信息压缩以及推送等提高效率的功能：在 http1 里面 http 里面的头信息都是通过字符串传输的，占用的量比较大，比较耗费性能。

-   http 推送的功能：之前的版本，http 客户端只能是主动的，服务器是被动的；现在可以服务器进行数据推送
