(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{179:function(e,a,t){"use strict";t.r(a);var n=t(0),s=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content"},[t("h4",{attrs:{id:"尝试使用webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#尝试使用webpack","aria-hidden":"true"}},[e._v("#")]),e._v(" 尝试使用webpack")]),e._v(" "),t("h5",{attrs:{id:"清除webpack-build时候的dist文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#清除webpack-build时候的dist文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 清除webpack build时候的dist文件")]),e._v(" "),t("p",[t("code",[e._v("clean-webpack-plugin")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("plugins: [\n    new CleanWebpackPlugin(['dist'],{\n        root: path.resolve(__dirname, '../'),\n        verbose: true //是否始终打印日志在控制台，默认false\n    }),\n]\n")])])]),t("blockquote",[t("p",[e._v("注意：当webpack的配置文件不在根目录下的时候，一定要配置root，否者会出现错误")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("    clean-webpack-plugin: D:\\workspace\\build-tools\\webpack\\dist is outside of the project root. Skipping...\n")])])]),t("h5",{attrs:{id:"代码压缩插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码压缩插件","aria-hidden":"true"}},[e._v("#")]),e._v(" 代码压缩插件")]),e._v(" "),t("p",[t("code",[e._v("uglifyjs-webpack-plugin")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('uglifyOptions: {\n    ie8: true,\n    compress: {\n        warnings: true,  //删除无法访问的代码或未使用的声明等时显示警告\n        drop_console: true, // 删除 console.* 函数\n        unsafe_proto: true  //false- 优化表达式，如 Array.prototype.slice.call(a)into[].slice.call(a)\n    }, \n    output: {\n        beautify: false, //不要美化代码\n        comments: false  //（默认false） - 传递true或"all"保留所有注释，"some"保留一些注释，正则表达式字符串（例如/^!/）或函数。\n    }\n},\nextractComments: false  //注释不要单独打包成一个文件\n')])])]),t("h5",{attrs:{id:"分离css"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分离css","aria-hidden":"true"}},[e._v("#")]),e._v(" 分离css")]),e._v(" "),t("p",[t("code",[e._v("extract-text-webpack-plugin")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('const ExtractTextPlugin = require("extract-text-webpack-plugin")\n\n...\ntest: /\\.css$/,\nuse: ExtractTextPlugin.extract({\n    fallback: "style-loader",\n    use: "css-loader"\n})\n...\nplugins: [\n    new ExtractTextPlugin("styles.css"),\n]\n')])])]),t("p",[e._v("这样编译会报错")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("(node:11360) DeprecationWarning: Tapable.plugin is deprecated. Use new API on `.hooks` instead\n(node:11360) UnhandledPromiseRejectionWarning: Error: Chunk.entrypoints: Use Chunks.groupsIterable and filter by instanceof Entrypoint instead\n")])])]),t("p",[e._v("错误出现原因：\nextract-text-webpack-plugin还不能支持webpack4.0.0以上的版本。\nnpm install --save-dev extract-text-webpack-plugin@next")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('package.json\n\n"extract-text-webpack-plugin": "^4.0.0-beta.0",\n')])])]),t("blockquote",[t("p",[e._v("编译的时候， 设置devtool: 'null', 可以减小体积")])]),e._v(" "),t("p",[e._v("在过去，如何将 CSS 提取到一个文件中这是 extract-text-webpack-plugin 的工作。不幸的是这个插件与 webpack 4 不太兼容。根据 Michael Ciniawsky 的说法：extract-text-webpack-plugin 的维护已经成为了一个很大的负担，这已经不是第一次因为它的问题，而使升级 webpack 主版本变的而复杂和繁琐。\n而在webpack 4+版本我们可以使用mini-css-extract-plugin 插件来解决这些问题。")]),e._v(" "),t("h5",{attrs:{id:"抽取js的公共代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#抽取js的公共代码","aria-hidden":"true"}},[e._v("#")]),e._v(" 抽取js的公共代码")]),e._v(" "),t("p",[e._v("webpack4 optimization.splitChunks(内部插件) 取代了CommonsChunkPlugin 插件")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("optimization: {\n    splitChunks: {\n        chunks: 'all',\n        minChunks: 1,\n        name: true,\n        cacheGroups: {\n            vendors: {\n                minChunks: 1,//一般为非第三方公共模块\n                chunks:'initial', // \n                name:'vendors', // 入口的entry的key\n                enforce:true   // 强制\n            }\n        }\n    }\n}\n")])])]),t("blockquote",[t("p",[e._v("webpack4 当模式为"),t("code",[e._v("production")]),e._v("时，会自动压缩js代码，但是可以通过"),t("code",[e._v("uglifyjs-webpack-plugin")]),e._v("进一步控制")])])])}],!1,null,null,null);a.default=s.exports}}]);